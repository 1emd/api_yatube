# api_yatube. API для социальной сети Yatube.

### Описание:

API для Yatube представляет собой проект социальной сети, где пользователи могут регистрироваться, публиковать посты с изображениями и текстом, комментировать посты, создавать и присоединяться к сообществам, подписываться на авторов и просматривать ленту новостей. Аутентификация осуществляется по JWT-токену. API поддерживает методы GET, POST, PUT, PATCH и DELETE, предоставляя данные в формате JSON. Он взаимодействует с моделями, такими как Posts, Groups, Comment.

### Инструкция по установке:

1. Клонируйте репозиторий и перейдите в него в командной строке:
  ```
  git clone git@github.com:1emd/api_yatube.git
  cd api_yatube
  ```
2. Создайте и активируйте виртуальное окружение:
  ```
  python3 -m venv venv
  ```
- Linux/macOS:

  ```
  source venv/bin/activate
  ```

- Windows:
  ```
  source env/scripts/activate
  ```

3. Установите зависимости из файла requirements.txt:
  ```
  pip install -r requirements.txt
  ```

4. Выполните миграции:
  ```
  python3 manage.py migrate
  ```

5. Запустите проект:
  ```
  python3 manage.py runserver
  ```

### Примеры работы с API:

- Для неавторизованных пользователей доступ к API доступен только для чтения, нельзя создавать новые записи или вносить изменения:
  ```
  GET api/v1/posts/ - получить список всех публикаций.
  При указании параметров `limit` и `offset` выполняется пагинация результатов.
  GET api/v1/posts/{id}/ - получение публикации по идентификатору.
  GET api/v1/groups/ - получение списка доступных сообществ.
  GET api/v1/groups/{id}/ - получение информации о сообществе по идентификатору.
  GET api/v1/{post_id}/comments/ - получение всех комментариев к публикации.
  GET api/v1/{post_id}/comments/{id}/ - получение комментария к публикации по идентификатору.
  ```

- Примеры работы с API для авторизованных пользователей:
   - Создание новой публикации:
     ```
     POST /api/v1/posts/
     ```
   - Обновление, частичное обновление, удаление публикаций:
     ```
     PUT /api/v1/posts/{id}/
     PATCH /api/v1/posts/{id}/
     DELETE /api/v1/posts/{id}/
     
     ```
  - Тело запроса:
    ```
    {
    "text": "string",
    "image": "string",
    "group": 0
    }
    ```
Для доступа к эндпоинту /api/v1/follow/ (подписки) требуется авторизация пользователя.

Подписка выполняется от имени пользователя, от которого был выполнен запрос, на пользователя, указанного в теле запроса. Анонимные запросы не разрешены.

### Добавление группы в проект выполняется через административную панель Django:

- После авторизации перейдите в раздел "Groups" и создайте необходимые группы.
  ```
  admin/
  ```
  
- Авторизованный доступ для пользователей осуществляется с использованием JWT-токена (Joser), который можно получить, выполнив POST-запрос по адресу:
  ```
  POST /api/v1/jwt/create/
  ```
  
- В теле запроса передайте данные пользователя (например, в Postman):
  ```
  {
  "username": "string",
  "password": "string"
  }
  ```
  
- Добавьте полученный токен в заголовки запроса (в Postman), после чего будут доступны все функции проекта:
```
Authorization: Bearer {your_token}
```

- Обновить JWT-токен:
```
POST /api/v1/jwt/refresh/
```

- Проверить JWT-токен:
```
POST /api/v1/jwt/verify/
```

### Технологии:

- Python 3.9
- Django 3.2
- DRF 
- JWT + Djoser

### Автор:
[Кирилл Хорошилов](https://github.com/1emd)
